module_name: redmine_license_manager
naming_prefix: rlm
# values that need to be created within a given submodule of the setup class
# See locales file for the name of the created instance
modules:
  setup:
    # Locales are used to setup the names of the given instances
    # Rake task can be used to change the names of the listed entries
    # `identify_column` is used as the unique key
    # `entries` are the values created - mapped to the `identify_column` attribute via the Setup.name (will be prefixed with 'naming_prefix')
    #
    activities:
      class_name: TimeEntryActivity
      identify_column: internal_name
      entries: [license, maintenance]

    trackers:
      class_name: Tracker
      identify_column: internal_name
      entries: [license, license_extension]
      additional_attributes:
        default_status_id: 'RLM::Setup::IssueStatuses.license_inactive.id'
        # This will run through eval(), Special case, as Trackers need a value for default status id even though using eval isn't pretty nice coding style.
        # Improvements welcome

    issue_statuses:
      class_name: IssueStatus
      identify_column: rlm_internal_name
      entries: [license_active, license_inactive]

    issue_custom_fields:
      class_name: IssueCustomField
      identify_column: internal_name
      entries:
        - license_price
        - license_purchase_price
        - maintenance_pp
        - maintenance_purchase_pp
        - maintenance_date
        - maintenance_paid_until
        - maintenance_invoice_received
        - period_in_days
        - customer_project_reference
      # special case here, as the entries dont just have a name, they also have a field type and other settings
      entry_settings:
        license_price:
          field_format: float
          is_required: true
        license_purchase_price:
          field_format: float
          is_required: true
        maintenance_pp:
          field_format: float
        maintenance_purchase_pp:
          field_format: float
        maintenance_date:
          field_format: date
        maintenance_paid_until:
          field_format: date
        maintenance_invoice_received:
          field_format: bool
        period_in_days:
          field_format: int
        customer_project_reference:
          field_format: int
  roles:
    view_licenses:
      rlm_licenses: []
    edit_licenses:
      rlm_licenses: []
    see_license_sale_price:
      rlm_licenses: []
    see_license_purchase_price:
      rlm_licenses: []


